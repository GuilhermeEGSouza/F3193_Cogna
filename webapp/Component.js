/*
 * Copyright (C) 2009-2023 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","scm/ewm/packoutbdlvs1/utils/Const","scm/ewm/packoutbdlvs1/model/Models","scm/ewm/packoutbdlvs1/modelHelper/Global","scm/ewm/packoutbdlvs1/service/ODataService","scm/ewm/packoutbdlvs1/modelHelper/OData","scm/ewm/packoutbdlvs1/utils/Util","scm/ewm/packoutbdlvs1/utils/ErrorHandler","sap/tl/ewm/lib/reuses1/controllers/AccessCode","sap/m/MessageBox","scm/ewm/packoutbdlvs1/modelHelper/PackingMode"],function(B,D,C,M,G,S,O,U,P,A,a,b){"use strict";return B.extend("scm.ewm.packoutbdlvs1.Component",{metadata:{manifest:"json"},initialPage:"default",applicationCode:"PKOD",enableAccessCode:true,mode:C.ADVANCED_MODE,_hasDirtyPage:function(){return false;},init:function(){B.prototype.init.apply(this,arguments);var w=this.getComponentData().startupParameters.Warehouse;if(U.isEmpty(w)){w="";}else{w=w[0];}G.setDefaultWarehouseNumber(w);P.sDefaultMessage=this.getModel("i18n").getResourceBundle().getText("errorText");this.initErrorHandler();S.init(this.getModel());O.init(this.getModel());jQuery.extend(this,A);var p=this.getComponentData().startupParameters.PackMode;var s;if(U.isEmpty(p)){s=C.PACK_MODE.OUTBOUND;}else{s=p[0];}var c=parseInt(s,10);S.setOdataHeader(c);if(c===C.PACK_MODE.OUTBOUND){b.setSelectedMode(C.ADVANCED_MODE);}else{b.setSelectedMode(C.INTERNAL_MODE);}this.initAppTitle(c);var t=this;this._fnOnHomeButtonClick=function(e){t.onHomeButtonClick.apply(t,arguments);};this._fnOnBackButtonClick=function(){t.onBackButtonClick.apply(t,arguments);};sap.ushell.Container.getServiceAsync("UserDefaultParameters").then(function(o){o.attachValueStored(this._reloadPage.bind(this));}.bind(this));this.getRouter().initialize();},_getHomeButton:function(){return jQuery.sap.getObject("homeBtn");},_reloadPage:function(e){},onHomeButtonClick:function(e){e.returnValue=false;var f=U.flushPendings.get();if(f){f().then(function(){this.navigateToHome.call(this,e);}.bind(this));}},onBackButtonClick:function(){var f=U.flushPendings.get();if(f){f().then(function(){this.navigateBack.call(this,arguments);}.bind(this));}},navigateToHome:function(e){e.returnValue=false;this.getCrossAppNav().toExternal({target:{shellHash:"#"}});},navigateBack:function(e){e.returnValue=false;this.getCrossAppNav().historyBack();},getShellUIService:function(){return sap.ushell.components.applicationIntegration.AppLifeCycle.getShellUIService();},getCrossAppNav:function(){return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");},destroy:function(){B.prototype.destroy.apply(this,arguments);sap.ushell.Container.getService("UserDefaultParameters").detachValueStored(this._reloadPage);this._fnOnBackButtonClick=null;U.flushPendings.set(null);this.destroyTableCells();},destroyTableCells:function(){var c=this.getId();var v=[C.ID.MAIN_SHIP_VIEW,C.ID.INTERNAL_SHIP_VIEW];var t=[C.ID.CREATE_DIALOG_TEMPLATE,C.ID.CHANGE_DIALOG_TEMPLATE];var e;v.forEach(function(V){t.forEach(function(T){e=this.byId(c+V+T);if(e){e.destroy();}}.bind(this));}.bind(this));},getApplicationCode:function(){return this.applicationCode;},setEnableAccessCode:function(e){this.enableAccessCode=e;},getEnableAccessCode:function(){return this.enableAccessCode;},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(jQuery(document.body).hasClass("sapUiSizeCozy")||jQuery(document.body).hasClass("sapUiSizeCompact")){this._sContentDensityClass="";}else if(!D.support.touch){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="sapUiSizeCozy";}}return this._sContentDensityClass;},initErrorHandler:function(){this.getModel().attachMessageChange(null,function(e){var m=e.getParameter("newMessages");var E=[];m.forEach(function(o){if(o.getType()===sap.ui.core.MessageType.Error){E.push(o.getMessage());}});if(E.length>0){a.error(E.join("\n"));}},this);},initAppTitle:function(m){this.getService("ShellUIService").then(function(s){var t;var r=this.getModel("i18n").getResourceBundle();if(m===C.PACK_MODE.OUTBOUND){t=r.getText("appTitle");}else{t=r.getText("internalTitle");}s.setTitle(t);s.setBackNavigation();}.bind(this),function(e){jQuery.sap.log.error("Cannot get ShellUIService",e,"my.app.Component");});}});});
