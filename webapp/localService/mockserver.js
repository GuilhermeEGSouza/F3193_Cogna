/*
 * Copyright (C) 2009-2023 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/util/MockServer","scm/ewm/packoutbdlvs1/utils/Util","scm/ewm/packoutbdlvs1/localService/mockConfig","scm/ewm/packoutbdlvs1/Component","sap/ui/thirdparty/sinon"],function(M,U,m,C,s){"use strict";var o,_="scm/ewm/packoutbdlvs1/",a=_+"localService/mockdata";return{init:function(){this._mockComponent();this._mockShell();var b=jQuery.sap.getModulePath(_+"manifest",".json"),c=jQuery.sap.syncGetJSON(b).data;o=this._initMockServerByDataSource(c["sap.app"].dataSources.mainService);var d=this._initMockServerByDataSource(c["sap.app"].dataSources.defaultParametersService);this.initSimulates(m);o.start();d.start();jQuery.sap.log.info("Running the app with mock data");},_mockComponent:function(){s.stub(C.prototype,"getComponentData").returns({startupParameters:{Warehouse:["EW1"],PackMode:[1]}});},_mockShell:function(){},_initMockServerByDataSource:function(d){jQuery.sap.getModulePath(_+"manifest",".json");var u=jQuery.sap.getUriParameters();var j=jQuery.sap.getModulePath(a);var b=jQuery.sap.getModulePath(_+d.settings.localUri.replace(".xml",""),".xml");var c=/.*\/$/.test(d.uri)?d.uri:d.uri+"/";var e=new M({rootUri:c});M.config({autoRespond:true,autoRespondAfter:u.get("serverDelay")||50});e.simulate(b,{sMockdataBaseUrl:j,bGenerateMissingMockData:true});return e;},initSimulates:function(c){var r=o.getRequests();c.forEach(function(b){var d=b.method?b.method.toUpperCase():"GET";r.push({method:d,path:b.path,response:function(x,u){var R;if(typeof b.response==="string"){R=b.response;}else if(b.response instanceof Function){var B;if(b.method==="POST"||b.method==="PUT"){B=JSON.parse(x.requestBody);}R=b.response(u,B);}else{jQuery.sap.log.error("mock server config: invalide config info for request path:"+b.path);}if(R===undefined){jQuery.sap.log.error("not found a valide response for request path:"+b.path);}var e=jQuery.sap.sjax({url:R});x.respondJSON(200,{},JSON.stringify(e.data));return true;}});});o.setRequests(r);},getParameterByName:function(n,u){var b=RegExp("[?&]"+n+"=([^&]*)").exec(u);return b&&decodeURIComponent(b[1].replace(/\+/g," "));}};});
